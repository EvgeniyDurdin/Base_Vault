**Основные принципы реляционных баз данных:**
-   все данные на концептуальном уровне представляются в виде объектов, заданных в виде строк и столбцов, называемых отношением, более распространенное название – таблица;
-   в пересечение строки и столбца таблицы можно занести только одно значение;
-   все операции выполняются над целыми отношениями и результатом этих операций является отношение.

Пример отношения
![[Stepic_IntTr_1.1.jpg]]

На примере таблицы **Сотрудник** рассмотрим **терминологию реляционных баз данных:**
-   _**отношение**_ – это структура данных целиком, набор записей (в обычном понимании – таблица), в  примере – это **Сотрудник**;
-   _**кортеж**_ – это каждая строка, содержащая данные (более распространенный термин – запись ), например, <00_1, Борин С.А, 234-01-23, программист_>, все кортежи в отношении должны быть различны;
-   _**мощность**_ – число кортежей в таблице (проще говоря, число записей), в данном случае 3, мощность отношения может быть любой (от 0 до бесконечности), порядок следования кортежей - неважен;
-   _**атрибут**_ – это столбец в таблице (более распространенный термин – поле ), в примере – **Табельный номер, Фамилия И.О., Телефон, Должность**) 
-   _**размерность**_ – это число атрибутов в таблице, в данном случае – 4; размерность отношения должна быть больше 0, порядок следования атрибутов существенен;
-    _**домен атрибута**_ – это допустимые значения (неповторяющиеся), которые можно занести в поле , например для атрибута **Должность** домен – {инженер, программист}.


## Отношение, реляционная модель
База данных, в том числе и реляционная, используется для формального описания  некоторой предметной области реального мира, например, склада, учебного процесса и пр. Обязательным этапом перед созданием базы данных является ее проектирование (этот процесс разбирается в следующих модулях).
В первом модуле будем рассматривать простейшие предметные области, информацию о которых можно описать в виде одной таблицы. Каждая такая таблица ассоциируется с неким информационным объектом или событием реального мира – человеком, документом, посещением и т.д. 
Перед созданием таблицы в базе данных необходимо описать ее структуру. Для этого выполняется следующая последовательность шагов:
1. Дать таблице имя, пусть она будет называться **book**, вот некоторые _**правила для выбора имен таблиц**_:
	-   может включать английские буквы, цифры и знак подчеркивания, должно начинаться с буквы;
	-   имя должно быть уникальным в пределах базы данных.
	Также **рекомендуется**:
	-   чтобы имя было существительным в единственном числе;
	-   имя должно быть понятным и соответствовать тому объекту, который оно описывает;
	-   имя должно быть как можно короче, максимум до 10 символов.
	**Важно.** Имена таблиц являются регистрозависимыми из-за операционной системы на которой работает **stepik**, то есть имя **book** и **Book** – разные имена. Рекомендуется для записи имен таблиц использовать только строчные (маленькие) буквы.
2. Определить структуру таблицы, из каких атрибутов(столбцов, полей) она будет состоять,  в нашем случае это:
	-   **title** – поле для хранения названия книги;
	-   **author** – поле с фамилией автора книги ;
	-   **priсe** – цена книги;
	-   **amount** – количество книг.
	**_Правила по выбору имени поля информационного объекта:_**
	-   может включать английские буквы, цифры и знак подчеркивания, должно начинаться с буквы;
	-   имя поля должно быть уникальным в пределах таблицы.
	**_Рекомендации по выбору имени поля информационного объекта:_**
	-   имя должно быть понятным и соответствовать тем данным, которые хранятся в поле;
	-   имя может состоять из нескольких слов, тогда слова разделяются подчеркиванием, после подчеркивания слово пишется с маленькой буквы.
3. Включить ключевое поле **book_id**, которое является ОБЯЗАТЕЛЬНЫМ ЭЛЕМЕНТОМ каждой реляционной таблицы. Ключевое поле является уникальным для каждой записи, однозначно определяет запись и в дальнейшем будет использоваться для связей с другими таблицами.
	**_Рекомендации по именованию  ключевых полей:_**
	-   имя должно состоять  из двух частей: начинаться с названия таблицы, которой поле принадлежит,  затем через подчеркивание необходимо указать **id.**


## Выбор типов данных для полей 
После описания структуры таблицы необходимо выбрать типы данных для каждого поля.
_**Рекомендации по выбору типов данных для полей таблицы.**_
-   Выбирайте минимальный тип данных исходя из максимального значения поля. Например, если максимальный текст, который может быть записан в поле, имеет длину 25 символов, значит нужно использовать тип VARCHAR(25).
-   Для описания ключевого поля используйте описание `INT PRIMARY KEY AUTO_INCREMENT`. Это значит, что в поле будут заноситься различные целые числа, при этом они будут автоматически генерироваться (каждая следующая строка будет иметь значение ключа на 1 больше предыдущего).
-   **book_id** - ключевой столбец, целое число, которое должно генерироваться автоматически  - `INT PRIMARY KEY AUTO_INCREMENT`;
-   **title** - строка текста, ее длина выбирается в зависимости от данных, которые предполагается хранить в поле, предположим, что название книги не превышает 50 символов - `VARCHAR(50)`;
-   **author** - строка текста - `VARCHAR(30)`;
-   **priсe** - для описание денежного значения используется числовой тип данных с двумя знаками после запятой - `DECIMAL(8,2)`;
-   **amount** - целое число - `INT`.


## Создание таблицы
Для создания таблицы используется SQL-запрос. В нем указывается какая таблица создается, из каких атрибутов(полей) она состоит и какой тип данных имеет каждое поле, при необходимости указывается описание полей (ключевое поле и т.д.). Его структура :
-   ключевые слова : `CREATE TABLE`
-   имя создаваемой таблицы;
-   открывающая круглая скобка «(»;
-   название поля и его описание, которое включает тип поля и другие необязательные характеристики;
-   запятая;
-   название поля и его описание;
-   ...
-   закрывающая скобка «)».
**Пример.** Создадим таблицу **genre** следующей структуры:
|**Поле**|**Тип, описание**|
|------|----------------|
|genre_id|`INT PRIMARY KEY AUTO_INCREMENT`|
|name_genre|`VARCHAR(30)`|
_Запрос:_
```sql
CREATE TABLE genre(
    genre_id INT PRIMARY KEY AUTO_INCREMENT, 
    name_genre VARCHAR(30)
);
```
Созданная таблица - пустая.
_**Рекомендации по записи SQL запроса**_
-   Ключевые слова: SQL не является регистрозависимым языком (CREATE и `create` - одно и тоже ключевое слово). 
-   Ключевые слова SQL и типы данных рекомендуется  записывать прописными (большими) буквами.
-   Имена таблиц и полей - строчными (маленькими) буквами.
-   SQL-запрос можно писать на нескольких строках.
-   В конце SQL-запроса ставится точка с запятой (хотя если Вы пишете один запрос, это необязательно).


## Вставка записи в таблицу
Для занесения новой записи в таблицу используется SQL запрос, в котором указывается в какую таблицу, в какие поля заносить новые значения. Структура запроса:
-   ключевые слова `INSERT INTO` (ключевое слово `INTO` можно пропустить);
-   имя таблицы, в которую добавляется запись;
-   открывающая круглая скобка «(»;
-    список полей через запятую, в которые следует занести новые данные;
-   закрывающая скобка «)»;
-   ключевое слово `VALUES`;
-   открывающая круглая скобка «(»;
-   список значений через запятую, которые заносятся в соответствующие поля, при этом текстовые значения заключаются в кавычки, числовые значения записываются без кавычек, в качестве разделителя целой и дробной части используется точка;
-   закрывающая скобка «)».
**Пример.** В **таблицу**, состоящую из двух столбцов добавим новую строку, при этом в **поле1** заносится **значение1**,  в **поле2** - **значение2**.
```sql
INSERT INTO таблица(поле1, поле2) 
VALUES (значение1, значение2);
```
В результате выполнения запроса новая запись заносится в конец обновляемой таблицы.
При составлении списка полей и списка значений необходимо учитывать следующее:
1.  количество полей и количество значений в списках должны совпадать;
2.  должно существовать прямое соответствие между позицией одного и того же элемента в обоих списках, поэтому первый элемент списка значений должен относиться к первому столбцу в списке столбцов, второй – ко второму столбцу и т.д.;
3.   типы данных элементов в списке значений должны быть совместимы с типами данных соответствующих столбцов таблицы ( целое число можно занести в поле типа DECIMAL, обратная операция - недопустима);
4.  новые значения нельзя добавлять в поля, описанные как `PRIMARY KEY AUTO_INCREMENT`;
5.  рекомендуется заполнять все поля записи, если же поле пропущено, значение этого поля зависит от установленных по умолчанию значений, если значения не установлены - на данной платформе вставляется пустое значение (`NULL`).
